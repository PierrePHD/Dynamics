\documentclass{standalone}
\usepackage{pgfplots}
\usepackage{pgfplotstable}
\pgfplotsset{compat=newest}

\begin{document}

\pgfplotstableread{DataOutMac.Y20.dat}{\firsttable}					% Read
  \pgfplotstablegetrowsof{DataOutMac.Y20.dat}
  \pgfmathtruncatemacro{\rows}{\pgfplotsretval-1}   	% Put the number of row minus one in \rows,
  																						%		to use : \foreach \p in {0,...,\rows}
% Assign variables max
\pgfplotstablegetelem{0}{[index] 0}\of{\firsttable}
	  	\let\maxX\pgfplotsretval
\pgfplotstablegetelem{0}{[index] 1}\of{\firsttable}
	  	\let\maxY\pgfplotsretval
\pgfplotstablegetelem{0}{[index] 2}\of{\firsttable}
	  	\let\maxZ\pgfplotsretval

\pgfmathsetmacro{\Zscale}{1/\maxZ} % contain the values of z between 0 and 1 cm (assuming that they are positiv)
\pgfmathsetmacro{\XYscale}{1/10}

% Defining by hand the axis
\begin{tikzpicture}[x={(\XYscale*0.4472cm,\XYscale*-0.4364cm)},y={(\XYscale*0.8944cm,\XYscale*0.2182cm)},z={(0cm,\Zscale cm)}]
%\begin{tikzpicture}[x={(\XYscale*0.4472cm,\XYscale*-0.6666cm)},y={(\XYscale*0.8944cm,\XYscale*0.3333cm)},z={(0cm,\Zscale cm)}]
%\begin{tikzpicture}[x={(\XYscale*0.707cm,\XYscale*-0.4082cm)},y={(\XYscale*0.707cm,\XYscale*0.4082cm)},z={(0cm,\Zscale cm)}]
%% The view can be changed, using some projection from 3D to the document plan :
%%		You have to define a view direction: d,
%%			and a vector inside your projection plan that will be the horizontal axe on your graph: h. 
%%			Chose them with norm = 1.
%% 		Then you construct your projection plan as such (O , h, v = [h x d/|| h x d ||] ).
%%		Where "x" is the cross product and || â€¢ || the norm.
%%			so that a vector k in 3D is expressed in the 2D projection as such :
%%			(  k.h  ,  k.v  )
%%			Here we do that for x and y, but for z we kept the \Zscale to preserve the desired size
%% The axis labels need to be adaptated, a formula is proposed further for the rotation angle.


% Defining hsb color to have a color scale
\colorlet{redhsb}[hsb]{red}		%
\colorlet{bluehsb}[hsb]{blue}	%

%% Drawing the system of axes
%\draw[->] (-0.7/\XYscale,-0.7/\XYscale,0) -- (0,-0.7/\XYscale,0) node [black,left] {x};
%\draw[->] (-0.7/\XYscale,-0.7/\XYscale,0) -- (-0.7/\XYscale,0,0) node [black,left] {y};
%\draw[->] (-0.7/\XYscale,-0.7/\XYscale,0) -- (-0.7/\XYscale,-0.7/\XYscale,0.7/\Zscale) node [black,left] {z};

\draw (0.5,0.5,0) -- (0.5,0.5,1);
\draw (1,0.5,1) -- (-1,0.5,1) node [black,left] {1};

% Write unit on x and y
\foreach \p in {1,5,10,15,20}{ %{1,...,\maxX}{
	\draw {(\p,-0.4/\XYscale,0)} node {\p};
	\draw (\p,-0.2/\XYscale,0) -- (\p,0.5,0);
}
\foreach \p in {1,20,40,60,80,100}{%{1,...,\maxY}{
	\draw {(\maxX+0.5+0.4/\XYscale,\p,0)} node {\p};
	\draw (\maxX+0.5+0.2/\XYscale, \p,0) -- (\maxX+0.5,\p,0);
}

	% Draw the grid
\foreach \p in {1,...,\maxX}{
	\foreach \q in {1,...,\maxY}{
		\draw[black] (\p-0.5,\q-0.5,0) -- (\p+0.5,\q-0.5,0) -- (\p+0.5,\q+0.5,0) -- (\p-0.5,\q+0.5,0) -- (\p-0.5,\q-0.5,0);
		}
}
% Axis label
%% rotate = x.h / || (x.h,x.v) ||
\draw {(\maxX+0.5+1/\XYscale,\maxY/2,0)} node[rotate=13.71]  {PGD space functions};
%% rotate = y.h / || (y.h,xy.v) ||
\draw {(\maxX/2,-0.7/\XYscale,0)} node[anchor=east,align=center] {POD space \\ functions};
%\draw {(\maxX/2,-1.2/\XYscale,0)} node[anchor=east,align=center] {POD space \\ functions}; %node[rotate=-44.30]
%\draw {(\maxX+0.5+1/\XYscale,\maxY/2,0)} node[rotate=20.44]  {PGD space functions};
%\draw {(\maxX/2,-1.2/\XYscale,0)} node[rotate=-56.15] {POD space functions};
%\draw {(\maxX+0.5+1/\XYscale,\maxY/2,0)} node[rotate=30]  {PGD space functions};
%\draw {(\maxX/2,-1.2/\XYscale,0)} node[rotate=-30] {POD space functions};

\foreach \p in {1,...,\rows}{
		\pgfplotstablegetelem{\p}{[index] 0}\of{\firsttable} 		% The order in which the bars are drawn is determined by
	  	\let\x\pgfplotsretval 															%		the order of the lines in the data file.
	  	\pgfplotstablegetelem{\p}{[index] 1}\of{\firsttable} 		% And as the drawings just pile up, the last one just goes
	  	\let\y\pgfplotsretval 															% 		on top of the previous drawings.
	  	\pgfplotstablegetelem{\p}{[index] 2}\of{\firsttable} 		% The order here works with chosen view angle, if you
	  	\let\z\pgfplotsretval 															%		change the angle, you might have to change it.

	  	\pgfmathsetmacro{\w}{0.9/2} % half the width of the bars

	  	\pgfmathtruncatemacro{\teinte}{100-((\z/\maxZ)*100)}
	  	\colorlet{col}[rgb]{bluehsb!\teinte!redhsb}
	  	% Unseen faces from orginal view, but if you change the angle ....
			%\fill[col] (\x-\w,\y-\w,\z) -- (\x-\w,\y+\w,\z) -- (\x-\w,\y+\w,0) -- (\x-\w,\y-\w,0) -- (\x-\w,\y-\w,\z);
			%	\draw[black] (\x-\w,\y-\w,\z) -- (\x-\w,\y+\w,\z) -- (\x-\w,\y+\w,0) -- (\x-\w,\y-\w,0) -- (\x-\w,\y-\w,\z);
			%\fill[col] (\x-\w,\y+\w,\z) -- (\x+\w,\y+\w,\z) -- (\x+\w,\y+\w,0) -- (\x-\w,\y+\w,0) -- (\x-\w,\y+\w,\z);
			%	\draw[black](\x-\w,\y+\w,\z) -- (\x+\w,\y+\w,\z) -- (\x+\w,\y+\w,0) -- (\x-\w,\y+\w,0) -- (\x-\w,\y+\w,\z);
	  	 % Visible faces from original view
			\fill[col] (\x+\w,\y+\w,\z) -- (\x+\w,\y-\w,\z) -- (\x+\w,\y-\w,0) -- (\x+\w,\y+\w,0) -- (\x+\w,\y+\w,\z);
				\draw[black](\x+\w,\y+\w,\z) -- (\x+\w,\y-\w,\z) -- (\x+\w,\y-\w,0) -- (\x+\w,\y+\w,0) -- (\x+\w,\y+\w,\z);
			\fill[col!60!gray] (\x+\w,\y-\w,\z) -- (\x-\w,\y-\w,\z) -- (\x-\w,\y-\w,0) -- (\x+\w,\y-\w,0) -- (\x+\w,\y-\w,\z);
				\draw[black](\x+\w,\y-\w,\z) -- (\x-\w,\y-\w,\z) -- (\x-\w,\y-\w,0) -- (\x+\w,\y-\w,0) -- (\x+\w,\y-\w,\z);
	  	  % Top face
	  	   \fill[top color=col!40!gray, bottom color=col!80!gray] (\x-\w,\y-\w,\z) -- (\x-\w,\y+\w,\z) -- (\x+\w,\y+\w,\z) -- (\x+\w,\y-\w,\z) -- (\x-\w,\y-\w,\z) ;
	  	    \draw[black] (\x-\w,\y-\w,\z) -- (\x-\w,\y+\w,\z) -- (\x+\w,\y+\w,\z) -- (\x+\w,\y-\w,\z) -- (\x-\w,\y-\w,\z);
}

\end{tikzpicture}

\end{document}
